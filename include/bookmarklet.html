<a href="
javascript:(function (win,t){
  var doc = win.document;
  setTimeout(function() {
    function remove(e) {
      if (e.data === 'destroy_bookmarklet') {
        var id = doc.getElementById(name);
        if (id) {
          doc.body.removeChild(id);
          id = null;
        }
      }
    }

    var name = 'DELI_bookmarklet_iframe';
    var id = doc.getElementById(name);
    if (id) {return;}

    var iframe = doc.createElement('iframe');
    iframe.id = name;
    var src = '//crack.lighter.net/bookmarks/save?'
      +'url='+encodeURIComponent(win.location.href)
      +'&title='+encodeURIComponent(doc.title)
      +'&description='+encodeURIComponent(''+(win.getSelection ? win.getSelection() : doc.getSelection ? doc.getSelection() : doc.selection.createRange().text));
    var found = 0;
    for (var i in doc.images) {
      if (doc.images[i].attributes !== undefined && doc.images[i].attributes.src !== undefined && !doc.images[i].src.startsWith('data:')) {
        found++;
        src += '&img='+encodeURIComponent(doc.images[i].attributes.src.value);
      }
      if (found >= 10) { break; }
    }
    iframe.src = src;
    iframe.style.position   = 'fixed';
    iframe.style.top        = '0';
    iframe.style.left       = '0';
    iframe.style.height     = '100%';
    iframe.style.width      = '100%';
    iframe.style.zIndex     = '16777270';
    iframe.style.border     = 'none';
    iframe.style.visibility = 'hidden';

    iframe.onload = function() {
      this.style.visibility='visible';
    };

    doc.body.appendChild(iframe);
    var listener = (win.addEventListener) ? 'addEventListener' : 'attachEvent';
    var event = (listener == 'attachEvent') ? 'onmessage' : 'message';
    win[listener](event,remove,false);
  },1);
})(window)
">Add Bookmark</a>

